mixed-port: 7890
socks-port: 7891
redir-port: 7892
allow-lan: true
mode: rule
log-level: info
external-controller: 0.0.0.0:9090
secret: ""
ipv6: false

# å¯ç”¨TUNæ¨¡å¼ï¼ˆæ¨èå¼€å¯ï¼‰
tun:
  enable: false  # è‹¥éœ€TUNæ¨¡å¼è¯·æ”¹ä¸º true
  stack: system
  dns-hijack:
    - tcp://any:53
    - udp://any:53
  auto-route: true
  auto-detect-interface: true

# DNSè®¾ç½®
dns:
  enable: true
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  nameserver:
    - 223.5.5.5
    - 119.29.29.29
    - 114.114.114.114
  fallback:
    - tls://1.1.1.1
    - tls://8.8.8.8
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4
      - 0.0.0.0/32

# ================= èŠ‚ç‚¹é…ç½® =================
proxies:
  # --- Vless-xhttp-reality-enc èŠ‚ç‚¹ ---
  - name: "BITTER-SERVER-1-vl-xhttp-reality-enc-dedirock-96354141"
    type: vless
    server: 192.227.229.43
    port: 29488
    uuid: 8d014a08-50f0-4ffc-ac86-5bbf518396af
    encryption: mlkem768x25519plus.native.0rtt.NGQj3MfJ9MVQygq7IXCQMbIPkmOxMGakNXipT0UVnRskJmSfJ4VmycNkeZx10KJC0tFFJ4F9v1RLYNlqnDdyJQGfXCsjp9EMMPlFAABqcNV9oxg2qALEBCRq6UlrL3U8CcmbqiMQkWVZ7OCtD8SN00eNM0S7DORtXPwJSTsT6EaxTavPKPRJFvCsY9HJ8DHKNuNPqfTFTNCUDZeQS9dS4egCJpSth2AoUoSQzVagzgQqq7Nox8uE2eIWsOc9C4sgAUx-hiQ4EndObXZUGnVAGSgmJ7ST-3AZy2ECXeHKK7cVNPNpvIcNiUgQ2xq9fTdVp9E9rAWtCyubGxy52iuOACOdkkG4UzGtH7KqfaqaSte23np9aDEf08pz7lUiisBUDXCUFRlijHNY7jtSuTxp4mC7pHKdvuUrw5KXwbyJQFET8zcUYUTIxii9yeYE8DKiykZrn6cefEBK8cxYZaJ89PKDYxE0ybOrqCVpKWfPQBoRaCZmXdKLchor6EYc5EKqg0YKCYGUqzgZoPAWA4OhLequCnAalOSb31YtpdhMB6Bikpy_dVJ_qztqBEgDWIgwSlTFFHiS_MjP_xuP9zeVwUGqHVtvHVhvxuFQOtSYILN5WcClQMA86NCNUtU6rcmEYLhZZ1O5JTQmDoiCt3F1_wCB1dyqQ4poPRUHmqOd6zYeK_KcRZaNtSgHnydWghIQpQmzJXUGqGip1URZjApP1Sd6NahSnPeOH2bEzvlf2nc2eby5DeC52mQ1_Ymo8mxyKTghJmYaPHREXiSBPRct7JwhbNcfuASoHTOyM-ppQXU7cDJP5vscD7Fh9Qk1fEQJJzWnDhA-JzWiTNY5UouUk3mQnoWEe5qeqCoG_zF2m-ptYbIotcseZ8CBNqBydvVSe5kpjkg1KotrVyIAC6xTtNhl57QEhxRwy2kXU5IszodwFOE7VOpRY-G8OwgxR7NH45lUpmkmsjR9GPRJwYqLMuGXsqayuWcRYKJAPGhryDe0zMwV1wCKRoigO-UF9Ey1VQcue8SAouhmztmy3tc-t5tSvsdEU7UIjvNIxkGc9IqSi3m3-5BEyyKoNBZK2CR_J6JUequS8GIDD5tDF_ikx5MMFFVns2IIv_ZAUom3dEchu6vDyHaTQzVQISOfHCNvx9kzZPpgwDmwZPS1NEht9qMG3VAkN-TCPktHmjWRD_g9USk-hNASeNzFrKM-PfqWy3vNgUaqzNVH8HF8s1giUxBiYzlpgtzJZFwO5Xo2U3SYGDyI1MY-BktoVOc1SxBVjovHxXKF6PtDhbJlbmG2AJIDYbQBmMfJAtMJmQOYSyBKgMK6fmVOs3VGEwOoJ9wnflld-eJrUVJz7-mbH-cOEPVQaRzCJIVg1clVMBhpzqQojfmCh2E6kdGmarp-hggdavOY6kMVKLWxoYWqNzVbPwIvkpmV_feYCEJirxEPz9lEOUnNWkMhI2tYOdAtR3BDbYq6ubFOn7RkzJLDOjVwOrZRbHKGkEGAIrghPnelSDweFSFeb3hehocKzqxEDqXFGORfRTiW50hrnJS_2Of0XBb9u8-b_JtxGOqfaAciGWk
    network: xhttp
    tls: true
    udp: true
    flow: xtls-rprx-vision
    servername: apple.com
    client-fingerprint: chrome
    reality-opts:
      public-key: zcs9PoJSF7N908ZsG7zQiHxm5obdJrbB_ce1HICIHm8
      short-id: 159c7dd8
    xhttp-opts:
      mode: auto
      path: "/8d014a08-50f0-4ffc-ac86-5bbf518396af-xh"

  # --- Vless-xhttp-enc èŠ‚ç‚¹ ---
  - name: "BITTER-SERVER-1-vl-xhttp-enc-dedirock-96354141"
    type: vless
    server: 192.227.229.43
    port: 29658
    uuid: 8d014a08-50f0-4ffc-ac86-5bbf518396af
    encryption: mlkem768x25519plus.native.0rtt.NGQj3MfJ9MVQygq7IXCQMbIPkmOxMGakNXipT0UVnRskJmSfJ4VmycNkeZx10KJC0tFFJ4F9v1RLYNlqnDdyJQGfXCsjp9EMMPlFAABqcNV9oxg2qALEBCRq6UlrL3U8CcmbqiMQkWVZ7OCtD8SN00eNM0S7DORtXPwJSTsT6EaxTavPKPRJFvCsY9HJ8DHKNuNPqfTFTNCUDZeQS9dS4egCJpSth2AoUoSQzVagzgQqq7Nox8uE2eIWsOc9C4sgAUx-hiQ4EndObXZUGnVAGSgmJ7ST-3AZy2ECXeHKK7cVNPNpvIcNiUgQ2xq9fTdVp9E9rAWtCyubGxy52iuOACOdkkG4UzGtH7KqfaqaSte23np9aDEf08pz7lUiisBUDXCUFRlijHNY7jtSuTxp4mC7pHKdvuUrw5KXwbyJQFET8zcUYUTIxii9yeYE8DKiykZrn6cefEBK8cxYZaJ89PKDYxE0ybOrqCVpKWfPQBoRaCZmXdKLchor6EYc5EKqg0YKCYGUqzgZoPAWA4OhLequCnAalOSb31YtpdhMB6Bikpy_dVJ_qztqBEgDWIgwSlTFFHiS_MjP_xuP9zeVwUGqHVtvHVhvxuFQOtSYILN5WcClQMA86NCNUtU6rcmEYLhZZ1O5JTQmDoiCt3F1_wCB1dyqQ4poPRUHmqOd6zYeK_KcRZaNtSgHnydWghIQpQmzJXUGqGip1URZjApP1Sd6NahSnPeOH2bEzvlf2nc2eby5DeC52mQ1_Ymo8mxyKTghJmYaPHREXiSBPRct7JwhbNcfuASoHTOyM-ppQXU7cDJP5vscD7Fh9Qk1fEQJJzWnDhA-JzWiTNY5UouUk3mQnoWEe5qeqCoG_zF2m-ptYbIotcseZ8CBNqBydvVSe5kpjkg1KotrVyIAC6xTtNhl57QEhxRwy2kXU5IszodwFOE7VOpRY-G8OwgxR7NH45lUpmkmsjR9GPRJwYqLMuGXsqayuWcRYKJAPGhryDe0zMwV1wCKRoigO-UF9Ey1VQcue8SAouhmztmy3tc-t5tSvsdEU7UIjvNIxkGc9IqSi3m3-5BEyyKoNBZK2CR_J6JUequS8GIDD5tDF_ikx5MMFFVns2IIv_ZAUom3dEchu6vDyHaTQzVQISOfHCNvx9kzZPpgwDmwZPS1NEht9qMG3VAkN-TCPktHmjWRD_g9USk-hNASeNzFrKM-PfqWy3vNgUaqzNVH8HF8s1giUxBiYzlpgtzJZFwO5Xo2U3SYGDyI1MY-BktoVOc1SxBVjovHxXKF6PtDhbJlbmG2AJIDYbQBmMfJAtMJmQOYSyBKgMK6fmVOs3VGEwOoJ9wnflld-eJrUVJz7-mbH-cOEPVQaRzCJIVg1clVMBhpzqQojfmCh2E6kdGmarp-hggdavOY6kMVKLWxoYWqNzVbPwIvkpmV_feYCEJirxEPz9lEOUnNWkMhI2tYOdAtR3BDbYq6ubFOn7RkzJLDOjVwOrZRbHKGkEGAIrghPnelSDweFSFeb3hehocKzqxEDqXFGORfRTiW50hrnJS_2Of0XBb9u8-b_JtxGOqfaAciGWk
    network: xhttp
    tls: true
    udp: true
    flow: xtls-rprx-vision
    skip-cert-verify: true
    xhttp-opts:
      mode: auto
      path: "/8d014a08-50f0-4ffc-ac86-5bbf518396af-vx"

  # --- Vless-ws-enc èŠ‚ç‚¹ ---
  - name: "BITTER-SERVER-1-vl-ws-enc-dedirock-96354141"
    type: vless
    server: 192.227.229.43
    port: 30207
    uuid: 8d014a08-50f0-4ffc-ac86-5bbf518396af
    encryption: mlkem768x25519plus.native.0rtt.NGQj3MfJ9MVQygq7IXCQMbIPkmOxMGakNXipT0UVnRskJmSfJ4VmycNkeZx10KJC0tFFJ4F9v1RLYNlqnDdyJQGfXCsjp9EMMPlFAABqcNV9oxg2qALEBCRq6UlrL3U8CcmbqiMQkWVZ7OCtD8SN00eNM0S7DORtXPwJSTsT6EaxTavPKPRJFvCsY9HJ8DHKNuNPqfTFTNCUDZeQS9dS4egCJpSth2AoUoSQzVagzgQqq7Nox8uE2eIWsOc9C4sgAUx-hiQ4EndObXZUGnVAGSgmJ7ST-3AZy2ECXeHKK7cVNPNpvIcNiUgQ2xq9fTdVp9E9rAWtCyubGxy52iuOACOdkkG4UzGtH7KqfaqaSte23np9aDEf08pz7lUiisBUDXCUFRlijHNY7jtSuTxp4mC7pHKdvuUrw5KXwbyJQFET8zcUYUTIxii9yeYE8DKiykZrn6cefEBK8cxYZaJ89PKDYxE0ybOrqCVpKWfPQBoRaCZmXdKLchor6EYc5EKqg0YKCYGUqzgZoPAWA4OhLequCnAalOSb31YtpdhMB6Bikpy_dVJ_qztqBEgDWIgwSlTFFHiS_MjP_xuP9zeVwUGqHVtvHVhvxuFQOtSYILN5WcClQMA86NCNUtU6rcmEYLhZZ1O5JTQmDoiCt3F1_wCB1dyqQ4poPRUHmqOd6zYeK_KcRZaNtSgHnydWghIQpQmzJXUGqGip1URZjApP1Sd6NahSnPeOH2bEzvlf2nc2eby5DeC52mQ1_Ymo8mxyKTghJmYaPHREXiSBPRct7JwhbNcfuASoHTOyM-ppQXU7cDJP5vscD7Fh9Qk1fEQJJzWnDhA-JzWiTNY5UouUk3mQnoWEe5qeqCoG_zF2m-ptYbIotcseZ8CBNqBydvVSe5kpjkg1KotrVyIAC6xTtNhl57QEhxRwy2kXU5IszodwFOE7VOpRY-G8OwgxR7NH45lUpmkmsjR9GPRJwYqLMuGXsqayuWcRYKJAPGhryDe0zMwV1wCKRoigO-UF9Ey1VQcue8SAouhmztmy3tc-t5tSvsdEU7UIjvNIxkGc9IqSi3m3-5BEyyKoNBZK2CR_J6JUequS8GIDD5tDF_ikx5MMFFVns2IIv_ZAUom3dEchu6vDyHaTQzVQISOfHCNvx9kzZPpgwDmwZPS1NEht9qMG3VAkN-TCPktHmjWRD_g9USk-hNASeNzFrKM-PfqWy3vNgUaqzNVH8HF8s1giUxBiYzlpgtzJZFwO5Xo2U3SYGDyI1MY-BktoVOc1SxBVjovHxXKF6PtDhbJlbmG2AJIDYbQBmMfJAtMJmQOYSyBKgMK6fmVOs3VGEwOoJ9wnflld-eJrUVJz7-mbH-cOEPVQaRzCJIVg1clVMBhpzqQojfmCh2E6kdGmarp-hggdavOY6kMVKLWxoYWqNzVbPwIvkpmV_feYCEJirxEPz9lEOUnNWkMhI2tYOdAtR3BDbYq6ubFOn7RkzJLDOjVwOrZRbHKGkEGAIrghPnelSDweFSFeb3hehocKzqxEDqXFGORfRTiW50hrnJS_2Of0XBb9u8-b_JtxGOqfaAciGWk
    network: ws
    tls: true
    udp: true
    flow: xtls-rprx-vision
    skip-cert-verify: true
    ws-opts:
      path: "/8d014a08-50f0-4ffc-ac86-5bbf518396af-vw"
      headers:
        Host: 192.227.229.43

  # --- Vless-tcp-reality-vision èŠ‚ç‚¹ ---
  - name: "BITTER-SERVER-1-vl-reality-vision-dedirock-96354141"
    type: vless
    server: 192.227.229.43
    port: 30934
    uuid: 8d014a08-50f0-4ffc-ac86-5bbf518396af
    encryption: none
    network: tcp
    tls: true
    udp: true
    flow: xtls-rprx-vision
    servername: apple.com
    client-fingerprint: chrome
    reality-opts:
      public-key: zcs9PoJSF7N908ZsG7zQiHxm5obdJrbB_ce1HICIHm8
      short-id: 159c7dd8

  # --- Shadowsocks-2022 èŠ‚ç‚¹ ---
  - name: "BITTER-SERVER-1-Shadowsocks-2022-dedirock-96354141"
    type: ss
    server: 192.227.229.43
    port: 22599
    cipher: 2022-blake3-aes-128-gcm
    password: "re4144SGF/3hXjv0x+pvw=="

  # --- AnyTLS èŠ‚ç‚¹ ---
  - name: "BITTER-SERVER-1-anytls-dedirock-96354141"
    type: anytls
    server: 192.227.229.43
    port: 39963
    uuid: 8d014a08-50f0-4ffc-ac86-5bbf518396af
    skip-cert-verify: true

  # --- Any-Reality èŠ‚ç‚¹ ---
  - name: "BITTER-SERVER-1-any-reality-dedirock-96354141"
    type: anytls
    server: 192.227.229.43
    port: 38591
    uuid: 8d014a08-50f0-4ffc-ac86-5bbf518396af
    tls: true
    servername: apple.com
    client-fingerprint: chrome
    reality-opts:
      public-key: hN_x4A9Mr2J_uNC98h157-wHSndRPuWAfza7G6UpYXQ
      short-id: 3f15e1d5
    network: tcp
    header:
      type: none

  # --- Hysteria2 èŠ‚ç‚¹ ---
  - name: "BITTER-SERVER-1-hy2-dedirock-96354141"
    type: hysteria2
    server: 192.227.229.43
    port: 11432
    password: 8d014a08-50f0-4ffc-ac86-5bbf518396af
    sni: www.bing.com
    skip-cert-verify: true
    alpn:
      - h3

  # --- Tuic èŠ‚ç‚¹ ---
  - name: "BITTER-SERVER-1-tuic-dedirock-96354141"
    type: tuic
    server: 192.227.229.43
    port: 41976
    uuid: 8d014a08-50f0-4ffc-ac86-5bbf518396af
    password: 8d014a08-50f0-4ffc-ac86-5bbf518396af
    ip: 192.227.229.43
    alpn: [h3]
    reduce-rtt: true
    udp-relay-mode: native
    congestion-controller: bbr
    skip-cert-verify: true
    sni: www.bing.com

# ================= ä»£ç†ç»„é…ç½® =================
proxy-groups:
  # æ‰‹åŠ¨é€‰æ‹©ç»„
  - name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies:
      - âš¡ è‡ªåŠ¨é€‰æ‹©
      - BITTER-SERVER-1-vl-xhttp-reality-enc-dedirock-96354141
      - BITTER-SERVER-1-vl-xhttp-enc-dedirock-96354141
      - BITTER-SERVER-1-vl-ws-enc-dedirock-96354141
      - BITTER-SERVER-1-vl-reality-vision-dedirock-96354141
      - BITTER-SERVER-1-Shadowsocks-2022-dedirock-96354141
      - BITTER-SERVER-1-anytls-dedirock-96354141
      - BITTER-SERVER-1-any-reality-dedirock-96354141
      - BITTER-SERVER-1-hy2-dedirock-96354141
      - BITTER-SERVER-1-tuic-dedirock-96354141
      - DIRECT

  # è‡ªåŠ¨æµ‹é€Ÿç»„
  - name: âš¡ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    tolerance: 50
    proxies:
      - BITTER-SERVER-1-vl-xhttp-reality-enc-dedirock-96354141
      - BITTER-SERVER-1-vl-xhttp-enc-dedirock-96354141
      - BITTER-SERVER-1-vl-ws-enc-dedirock-96354141
      - BITTER-SERVER-1-vl-reality-vision-dedirock-96354141
      - BITTER-SERVER-1-Shadowsocks-2022-dedirock-96354141
      - BITTER-SERVER-1-anytls-dedirock-96354141
      - BITTER-SERVER-1-any-reality-dedirock-96354141
      - BITTER-SERVER-1-hy2-dedirock-96354141
      - BITTER-SERVER-1-tuic-dedirock-96354141

  # åˆ†ç­–ç•¥ç»„
  - name: ğŸ“º å›½å¤–åª’ä½“
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - âš¡ è‡ªåŠ¨é€‰æ‹©
      - DIRECT

  - name: ğŸŒ å›½å¤–ç½‘ç«™
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - âš¡ è‡ªåŠ¨é€‰æ‹©
      - DIRECT

  - name: ğŸ¤– AIæœåŠ¡
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - âš¡ è‡ªåŠ¨é€‰æ‹©

  - name: ğŸ‡¨ğŸ‡³ å›½å†…ç›´è¿
    type: select
    proxies:
      - DIRECT

  - name: ğŸš« å¹¿å‘Šæ‹¦æˆª
    type: select
    proxies:
      - REJECT

# ================= è§„åˆ™é…ç½® =================
rules:
  # æœ¬åœ°/å±€åŸŸç½‘
  - DOMAIN-SUFFIX,local,DIRECT
  - IP-CIDR,127.0.0.0/8,DIRECT
  - IP-CIDR,172.16.0.0/12,DIRECT
  - IP-CIDR,192.168.0.0/16,DIRECT
  - IP-CIDR,10.0.0.0/8,DIRECT
  
  # å¹¿å‘Šæ‹¦æˆª
  - DOMAIN-KEYWORD,adservice,ğŸš« å¹¿å‘Šæ‹¦æˆª
  - DOMAIN-SUFFIX,doubleclick.net,ğŸš« å¹¿å‘Šæ‹¦æˆª
  - DOMAIN-SUFFIX,googleadservices.com,ğŸš« å¹¿å‘Šæ‹¦æˆª
  
  # å›½å†…ç›´è¿
  - GEOIP,CN,ğŸ‡¨ğŸ‡³ å›½å†…ç›´è¿
  - DOMAIN-SUFFIX,cn,ğŸ‡¨ğŸ‡³ å›½å†…ç›´è¿
  - DOMAIN-SUFFIX,qq.com,ğŸ‡¨ğŸ‡³ å›½å†…ç›´è¿
  - DOMAIN-SUFFIX,baidu.com,ğŸ‡¨ğŸ‡³ å›½å†…ç›´è¿
  - DOMAIN-SUFFIX,taobao.com,ğŸ‡¨ğŸ‡³ å›½å†…ç›´è¿
  - DOMAIN-SUFFIX,jd.com,ğŸ‡¨ğŸ‡³ å›½å†…ç›´è¿
  - DOMAIN-SUFFIX,bilibili.com,ğŸ‡¨ğŸ‡³ å›½å†…ç›´è¿
  - DOMAIN-SUFFIX,163.com,ğŸ‡¨ğŸ‡³ å›½å†…ç›´è¿
  
  # AIæœåŠ¡
  - DOMAIN-SUFFIX,openai.com,ğŸ¤– AIæœåŠ¡
  - DOMAIN-SUFFIX,claude.ai,ğŸ¤– AIæœåŠ¡
  
  # å›½å¤–åª’ä½“
  - DOMAIN-SUFFIX,youtube.com,ğŸ“º å›½å¤–åª’ä½“
  - DOMAIN-SUFFIX,netflix.com,ğŸ“º å›½å¤–åª’ä½“
  - DOMAIN-SUFFIX,disneyplus.com,ğŸ“º å›½å¤–åª’ä½“
  
  # å¸¸ç”¨å›½å¤–æœåŠ¡
  - DOMAIN-SUFFIX,google.com,ğŸŒ å›½å¤–ç½‘ç«™
  - DOMAIN-SUFFIX,github.com,ğŸŒ å›½å¤–ç½‘ç«™
  - DOMAIN-SUFFIX,telegram.org,ğŸŒ å›½å¤–ç½‘ç«™
  - DOMAIN-SUFFIX,twitter.com,ğŸŒ å›½å¤–ç½‘ç«™
  
  # å…œåº•è§„åˆ™
  - GEOIP,!CN,ğŸŒ å›½å¤–ç½‘ç«™
  - MATCH,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
